r[] <- sample(1:5,ncell(r), replace=T)
# make a dummy raster
r <- raster(xmn=0,xmx=10,ymn=0,ymx=10,res=1)
r[] <- sample(1:5,ncell(r), replace=T)
# make some dummy points
points <- data.frame(x=round(runif(10, 0.0, 10.0),1), y=round(runif(10, 0.0, 10.0),1))
# create a SpatialPointsDataFrame
coords <- cbind(points$x, points$y)
pts <- SpatialPointsDataFrame(coords, points)
# Add an attribute to SPDF that is the cell number of the raster, per point
pts$cellno <- extract(r,pts,cellnumbers=T)[,"cells"]
# use the 'adjacent' function to extract queen's case raster cells, per point
# this requires the cell numbers we extracted above
li <- lapply(pts$cellno, function(x) adjacent(r,x, directions = 8, include=T))
# collapse to one data frame
df <- do.call(rbind.data.frame, li)
# add a column that is the values of the cells, per point
df$val <- extract(r,df[,2])
# if you want, merge in the XY data
df.all <- merge(df, pts@data, by.x = "from", by.y = "cellno")
plot(r)
# make a dummy raster
r <- raster(xmn=0,xmx=10,ymn=0,ymx=10,res=1)
plot(r)
r[] <- sample(1:5,ncell(r), replace=T)
plot(r)
# make some dummy points
points <- data.frame(x=round(runif(10, 0.0, 10.0),1), y=round(runif(10, 0.0, 10.0),1))
plot(points)
# create a SpatialPointsDataFrame
coords <- cbind(points$x, points$y)
plot(coords)
pts <- SpatialPointsDataFrame(coords, points)
plot(pts)
# Add an attribute to SPDF that is the cell number of the raster, per point
pts$cellno <- extract(r,pts,cellnumbers=T)[,"cells"]
# use the 'adjacent' function to extract queen's case raster cells, per point
# this requires the cell numbers we extracted above
li <- lapply(pts$cellno, function(x) adjacent(r,x, directions = 8, include=T))
plot(li)
# collapse to one data frame
df <- do.call(rbind.data.frame, li)
# add a column that is the values of the cells, per point
df$val <- extract(r,df[,2])
# if you want, merge in the XY data
df.all <- merge(df, pts@data, by.x = "from", by.y = "cellno")
plot(r)
tic()
G1D1 <- read.ENVI(
file = "../Data/2022-01-18 CERC potatoes/20220118_135248_G1/20220118_135248_G1.dat",
headerfile = "../Data/2022-01-18 CERC potatoes/20220118_135248_G1/20220118_135248_G1.hdr",
header = list(),
keys.hdr2data = FALSE,
wavelength = NULL,
label = list(),
block.lines.skip = 0,
block.lines.size = NULL,
pull.header.lines = TRUE); toc()
bbtest[] <- sample(1:5,ncell(bbtest))
bbtest <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,114])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,65])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,32])))
G1D1df <- as.data.frame(G1D1, xy = TRUE)
bbtest <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,114])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,65])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,32])))
bbtest[] <- sample(1:5,ncell(bbtest))
bbtest[] <- sample(1:5,ncell(bbtest), replace = T)
plotRGB(bbtest,
r = 1,
g = 2,
b = 3,
stretch = "lin")
bbtest[] <- sample(1:50,ncell(bbtest), replace = F)
bbtest[] <- sample(1:50,ncell(bbtest), replace = T)
plotRGB(bbtest,
r = 1,
g = 2,
b = 3,
stretch = "lin")
bbtest <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,114])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,65])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,32])))
plotRGB(bbtest,
r = 1,
g = 2,
b = 3,
stretch = "lin")
bbtest[] <- sample(1:50, replace = T)
plotRGB(bbtest,
r = 1,
g = 2,
b = 3,
stretch = "lin")
bbtest[] <- sample(1:50, replace = F)
bbtest <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,114])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,65])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,32])))
bbtest[] <- sample(1:50, replace = F)
plotRGB(bbtest,
r = 1,
g = 2,
b = 3,
stretch = "lin")
bbtest <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,114])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,65])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,32])))
plotRGB(bbtest,
r = 1,
g = 2,
b = 3,
stretch = "lin")
bbtest[] <- sample(1:50, replace = F)
plotRGB(bbtest,
r = 1,
g = 2,
b = 3,
stretch = "lin")
bbtest <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,114])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,65])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,32])))
e <- extent(250, 450, 300, 500)
plot(e)
plotRGB(bbtest,
r = 1,
g = 2,
b = 3,
stretch = "lin")
r1 <- crop(rgb, e) #Works
plot(e, add = T)
## 3.1.3 SIPI (Structure Intensive Pigment Index)
sipi <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,199])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,22])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,139])))
pal <- colorRampPalette(c("black","green"))
plot((sipi[[1]] - sipi[[2]])/(sipi[[1]] + sipi[[3]]),
axes = F,
col = pal(50),
main="Structure Intensive Pigment Index",
sub="Georgina plant 1, day 1")
## 3.1.4 CARI (Chlorophyll Absorption in Reflectance Index)
cari <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,149])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,134])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,74])))
pal <- colorRampPalette(c("black","green"))
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
## 3.1.5 PSSRa-c (Pigment- Specific Simple Ratio)
PSSRac <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,199]/G1D1df$spc[,139])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,199]/G1D1df$spc[,117])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,199]/G1D1df$spc[,34])))
plotRGB(PSSRac,
r = 1,
g = 2,
b = 3,
stretch = "lin")
## 3.1.4 CARI (Chlorophyll Absorption in Reflectance Index)
cari <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,149])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,134])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,74])))
pal <- colorRampPalette(c("black","green"))
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
cari <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,149])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,134])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,74])))
pal <- colorRampPalette(c("black","green"))
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3.5
plot(bb1)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3
plot(bb1)
bbox1 <- spPolygons(extent(bb1))
cari <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,149])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,134])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,74])))
pal <- colorRampPalette(c("black","green"))
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
lines(bbox1)
bbox1 <- spPolygons(extent(bb1), crs = crs(cari))
pal <- colorRampPalette(c("black","green"))
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
lines(bbox1)
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
plot(bbox1, add=T)
plot.new(bbox1, add=T)
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
plot.new(bbox1)
r1 <- crop(cari, bbox1) #Works
plot(r1)
r1 <- crop(cari, bbox1) #Works
plot(r1)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3
plot(bb1)
bbox1 <- spPolygons(extent(bb1), crs = crs(cari))
plot(bb1)
plot(bbox1)
plot(bb1)
plot(bbox1, add=T)
plot(bb1)
plot(bbox1, type='n',axes=FALSE,ann=FALSE)
plot(bb1)
bbox1 <- spPolygons(extent(bb1), crs = crs(cari))
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
lines(bbox1)
lines(bbox1)
plot(bbox1)
View(bbox1)
plot(bb1, axes = T)
plot(bbox1, axes = T)
bbox1 <- spPolygons(extent(bb1))
plot(bbox1, axes = T)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3
plot(bb1, axes = T)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3.2
plot(bb1, axes = T)
bbox1 <- spPolygons(extent(bb1))
plot(bbox1, axes = T)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3.8
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3.8
plot(bb1, axes = T)
bbox1 <- spPolygons(extent(bb1))
plot(bbox1, axes = T)
cari <- brick(
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,149])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,134])),
rasterFromXYZ(data.frame(G1D1df$x, G1D1df$y, G1D1df$spc[,74])))
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3.8
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3.8
plot(bb1, axes = T)
bbox1 <- spPolygons(extent(bb1))
plot(bbox1, axes = T)
bbox1 <- spPolygons(bb1)
plot(bbox1, axes = T)
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
plot(bbox1)
plot(bb1, axes = T)
bbox1 <- spPolygons(extent(bb1))
library(terra)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3.8
plot(bb1, axes = T)
bbox1 <- spPolygons(extent(as.polygons(bb1)))
bbox1 <- spPolygons(as.polygons(bb1))
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3.
plot(bb1, axes = T)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3
plot(bb1, axes = T)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 4
plot(bb1, axes = T)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3
bb1 <- as.polygons((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3)
bb1 <-rasterToPolygons((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3, dissolve = T)
bb1 <-rasterToPolygons((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3, dissolve = T)
bb1 <-rasterToPolygons((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3, dissolve = T)
plot(bb1,
bbox1 <- spPolygons(extent(bb1))
bb1 <- c((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3)
bb1 <- c((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3)
plot(bb1, axes = T)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3
plot(bb1, axes = T)
bbox1 <- spPolygons(extent((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3))
plot(bbox1, axes = T)
bbox1 <- spPolygons(extent(bb1[,>1]))
bbox1 <- spPolygons(extent(bb1[,>0.8]))
bb1 <- subset(cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3
bb1 <- subset(cari, (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3)
bb1 <- subset(cari, (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) => 3)
bb1 <- subset(cari, (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3, drop = T)
bbox1 <- spPolygons(extent(max(bb1)))
plot(bbox1, axes = T)
bb2 <- brick(G1D1df$x, G1D1df$y,  (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3)
bb2 <- brick(G1D1df$x, G1D1df$y, bb1)
bb2 <- brick(cari$x, cari$y, bb1)
brick(bb1)
str(bb1)
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3
plot(bb1, axes = T)
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
bb1 <- stack(cari, (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3)
plot(bb1, axes = T)
bb2 <- bb1[4]>0.8
bb1 <- as(cari, (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3, "SpatialPolygonsDataFrame")
bb1 <- as(cari, (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3, "SpatialPolygonsDataFrame")
bb1 <- (cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3
plot(bb1, axes = T)
str(bb1)
bb1 <- ((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3)
plot(bb1, axes = T)
bb1 <- mutate((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3)
library(dplyr)
bb1 <- mutate((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3)
bb1 <- ((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3)
plot(bb1, axes = T)
grid100 <- rasterToPolygons(r, n = 4, na.rm = TRUE)
bb1 <- ((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3)
plot(grid100, add = T)
plot(grid100, add = T)
plot(grid100)
grid100 <- rasterToPolygons(cari, n = 4, na.rm = TRUE)
grid100 <- rasterToPolygons(cari, n = 4, na.rm = TRUE)
grid100 <- bb1(cari, n = 4, na.rm = TRUE)
grid100 <- rasterToPolygons(bb1, n = 4, na.rm = TRUE)
bb1 <- if((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3, "1")
bb1 <- if((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3){1}
bb1 <- if((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3){
"1"} else {"0"}
bb1 <- if((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) > 3){
"1"} else {"0"}
bb1 <- ((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]])
if (bb1 >= 3) {1} else {0}
if (bb1 >= 3) {"1"} else {"0"}
if (bb1 >= 3) {1} else {0}
if (bb1 > 3) {1} else {0}
zones <- raster(cari, xmn = 0, xmx = 50, ymn = 0, ymx = 50, crs = crs(cari))
zones <- raster(cari, xmn = 0, xmx = 50, ymn = 0, ymx = 50)
zones <- raster(zones, xmn = 0, xmx = 968, ymn = 0, ymx = 608)
zones <- raster(cari, xmn = 0, xmx = 968, ymn = 0, ymx = 608)
zones <- raster(cari)
plot (zones)
plot(bb1, axes = T)
str(bb1)
bbox1 <- spPolygons(extent(bb1))
plot(bbox1, axes = T)
pal <- colorRampPalette(c("black","green"))
plot((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]),
col = pal(50))
.grid <- as(bb1,'SpatialGridDataFrame')
grid <- as(bb1,'SpatialGridDataFrame')
plot(grid)
bbox(.grid)
.grid <- as(bb1,'SpatialGridDataFrame')
bbox(.grid)
plot(.grid)
bbox[1]
bbox[1,]
bbox[,1]
bb1[,1]
bb1[,2]
bb1[]
max.print(bb1[])
bb1[]
bb1 <- ((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3)
plot(bb1, axes = T)
bbox1 <- spPolygons(extent(bb1[TRUE]))
bbox1 <- spPolygons(extent(bb1[1]))
bbox1 <- spPolygons(extent(bb1[,1]))
plot(bbox1, axes = T)
plot(bbox1, axes = T)
bb1
bb2 <- as.data.frame(bb1)
View(bb2)
View(bb2)
bb2 <- as.data.frame(bb1, xy = T)
View(bb2)
plot(bb2)
View(bb2)
plot(bb1)
View(bb2)
bbox1 <- spPolygons(extent(bb2$layer == "TRUE"))
bbox1 <- spPolygons(extent(bb2$layer))
bbox1 <- spPolygons(bb2)
bb3 <- subset(bb2, bb2$layer=="TRUE")
plotmap(bb3)
bb4 <- brick(bb3)
bb4 <- rasterFromXYZ(bb3$x,bb3$y,bb3$layer)
tic()
G1D1 <- read.ENVI(
file = "../Data/2022-01-18 CERC potatoes/20220118_135248_G1/20220118_135248_G1.dat",
headerfile = "../Data/2022-01-18 CERC potatoes/20220118_135248_G1/20220118_135248_G1.hdr",
header = list(),
keys.hdr2data = FALSE,
wavelength = NULL,
label = list(),
block.lines.skip = 0,
block.lines.size = NULL,
pull.header.lines = TRUE); toc()
tic()
ggplot() +
geom_spatial_rgb(data = G1D1df,
aes (x = x, y = y,
r = spc[,114],
g = spc[,65],
b = spc[,32]),
stat = "spatialRGB"); toc()
tic()
G1D1 <- read.ENVI(
file = "../Data/2022-01-18 CERC potatoes/20220118_135248_G1/20220118_135248_G1.dat",
headerfile = "../Data/2022-01-18 CERC potatoes/20220118_135248_G1/20220118_135248_G1.hdr",
header = list(),
keys.hdr2data = FALSE,
wavelength = NULL,
label = list(),
block.lines.skip = 0,
block.lines.size = NULL,
pull.header.lines = TRUE); toc()
G1D2 <- read.ENVI(
file = "../Data/2022-01-27 CERC potatoes/20220127_114743_G1/20220127_114743_G1.dat",
headerfile = "../Data/2022-01-27 CERC potatoes/20220127_114743_G1/20220127_114743_G1.hdr",
header = list(),
keys.hdr2data = FALSE,
wavelength = NULL,
label = list(),
block.lines.skip = 0,
block.lines.size = NULL,
pull.header.lines = TRUE)
## 1) Packages loading ####
if(!require("hyperSpec")) install.packages("hyperSpec")
if(!require("raster")) install.packages("raster")
if(!require("tictoc")) install.packages("tictoc")
G1D2 <- read.ENVI(
file = "../Data/2022-01-27 CERC potatoes/20220127_114743_G1/20220127_114743_G1.dat",
headerfile = "../Data/2022-01-27 CERC potatoes/20220127_114743_G1/20220127_114743_G1.hdr",
header = list(),
keys.hdr2data = FALSE,
wavelength = NULL,
label = list(),
block.lines.skip = 0,
block.lines.size = NULL,
pull.header.lines = TRUE)
G1D2df <- as.data.frame(G1D2, xy = TRUE)
rm (G1D2)
##G1D2
rgb <- brick(
rasterFromXYZ(data.frame(G1D2df$x, G1D2df$y, G1D2df$spc[,114])),
rasterFromXYZ(data.frame(G1D2df$x, G1D2df$y, G1D2df$spc[,65])),
rasterFromXYZ(data.frame(G1D2df$x, G1D2df$y, G1D2df$spc[,32])))
bbox1 <- spPolygons(rbind(c(400,200), c(400,300), c(500, 300), c(500,200)))
plotRGB(rgb,
r = 1,
g = 2,
b = 3,
stretch = "lin",
addfun = lines(bbox1))
##G1D2
cari <- brick(
rasterFromXYZ(data.frame(G1D2df$x, G1D2df$y, G1D2df$spc[,149])),
rasterFromXYZ(data.frame(G1D2df$x, G1D2df$y, G1D2df$spc[,134])),
rasterFromXYZ(data.frame(G1D2df$x, G1D2df$y, G1D2df$spc[,74])))
.bb1 <- ((cari[[1]] - cari[[2]]) - 0.2*(cari[[1]] - cari[[3]]) >= 3.75)
.bb2 <- as.data.frame(.bb1, xy = T)
.bb3 <- subset(.bb2, .bb2$layer == "TRUE")
plot(.bb1)
bbox1 <- spPolygons(extent(.bb3), crs = crs(.bb1))
bbox(bbox1)
bbox1 <- spPolygons(rbind(c(400,200), c(400,300), c(500, 300), c(500,200)))
plotRGB(rgb,
r = 1,
g = 2,
b = 3,
stretch = "lin",
addfun = lines(bbox1))
bbox1 <- spPolygons(rbind(c(450,250), c(450,350), c(550, 350), c(550,250)))
plotRGB(rgb,
r = 1,
g = 2,
b = 3,
stretch = "lin",
addfun = lines(bbox1))
bbox1 <- spPolygons(rbind(c(350,150), c(350,250), c(450, 250), c(450,150)))
plotRGB(rgb,
r = 1,
g = 2,
b = 3,
stretch = "lin",
addfun = lines(bbox1))
bbox1 <- spPolygons(rbind(c(350,200), c(350,300), c(450, 300), c(450,200)))
plotRGB(rgb,
r = 1,
g = 2,
b = 3,
stretch = "lin",
addfun = lines(bbox1))
bbox1 <- spPolygons(rbind(c(350,250), c(350,350), c(450, 350), c(450,250)))
plotRGB(rgb,
r = 1,
g = 2,
b = 3,
stretch = "lin",
addfun = lines(bbox1))
G1D1 <- read.ENVI(
file = "../Data/2022-01-18 CERC potatoes/20220118_135248_G1/20220118_135248_G1.dat",
headerfile = "../Data/2022-01-18 CERC potatoes/20220118_135248_G1/20220118_135248_G1.hdr",
header = list(),
keys.hdr2data = FALSE,
wavelength = NULL,
label = list(),
block.lines.skip = 0,
block.lines.size = NULL,
pull.header.lines = TRUE)
